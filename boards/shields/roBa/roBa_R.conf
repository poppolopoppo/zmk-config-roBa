# Set keyboard name
CONFIG_ZMK_KEYBOARD_NAME="pOpPolLoPpoBa"

# Enable pointing device (trackball) function
CONFIG_ZMK_POINTING=y
# Enable NFC function pins as GPIO
CONFIG_NFCT_PINS_AS_GPIOS=y
# Enable Bluetooth Low Energy function
CONFIG_ZMK_BLE=y

# Enable SPI communication (required for communication with the PMW3610 sensor)
CONFIG_SPI=y
# Enable input device support
CONFIG_INPUT=y

# https://github.com/mentako-ya/zmk-pmw3610-driver/blob/main/Kconfig

# Enable PMW3610 trackball sensor driver
CONFIG_PMW3610=y
# CPI (Counts Per Inch) setting - cursor speed (higher values ​​= faster)
CONFIG_PMW3610_CPI=800
# CPI divisor - effective CPI = CPI / DIVIDOR
CONFIG_PMW3610_CPI_DIVIDOR=1
# Trackball orientation (180 degrees)
CONFIG_PMW3610_ORIENTATION_180=y
# CPI setting for Snipe mode (precise operation mode)
CONFIG_PMW3610_SNIPE_CPI=1200
CONFIG_PMW3610_SNIPE_CPI_DIVIDOR=4
# CPI divisor for Snipe mode
# CONFIG_PMW3610_SNIPE_CPI_DIVIDOR=4
# Scroll sensitivity - The smaller the value, the faster the scrolling speed.
CONFIG_PMW3610_SCROLL_TICK=16
# Invert X-axis movement (n=Do not invert)
CONFIG_PMW3610_INVERT_X=n
# Invert X-axis scrolling (y=Invert)
CONFIG_PMW3610_INVERT_SCROLL_X=y
# Time until downshift from RUN mode (ms)
CONFIG_PMW3610_RUN_DOWNSHIFT_TIME_MS=3264
# Sampling time for REST1 mode (ms)
CONFIG_PMW3610_REST1_SAMPLE_TIME_MS=20
# Time until downshift to REST1 mode (ms)
#CONFIG_PMW3610_REST1_DOWNSHIFT_TIME_MS=9600
# Sampling time in REST2 mode (milliseconds)
#CONFIG_PMW3610_REST2_SAMPLE_TIME_MS=
# Time before downshifting to REST2 mode (milliseconds)
#CONFIG_PMW3610_REST2_DOWNSHIFT_TIME_MS=
# Sampling time in REST3 mode (milliseconds)
#CONFIG_PMW3610_REST3_SAMPLE_TIME_MS=
# Time before downshifting to REST3 mode (milliseconds)
#CONFIG_PMW3610_REST3_DOWNSHIFT_TIME_MS=
# Whether to keep the sensor awake (n=Use power-saving mode)
#CONFIG_PMW3610_FORCE_AWAKE=n

# Polling rate (makes it a little snappier)
CONFIG_PMW3610_POLLING_RATE_125_SW=y
CONFIG_PMW3610_POLLING_RATE_250=y

# https://x.com/kazy_developer/status/1923297455832961494
# https://github.com/poppolopoppo/zmk-pmw3610-driver/blob/main/src/pmw3610.c

# Time before the AutoMouse layer times out after trackball operation (milliseconds)
CONFIG_PMW3610_AUTOMOUSE_TIMEOUT_MS=600
# Minimum threshold for detecting motion (0 = detect all motion)
CONFIG_PMW3610_MOVEMENT_THRESHOLD=1
# Enable smart algorithm (improves tracking accuracy)
CONFIG_PMW3610_SMART_ALGORITHM=y

# Enable EC11 rotary encoder support
CONFIG_EC11=y
# Trigger encoder events on the global thread
CONFIG_EC11_TRIGGER_GLOBAL_THREAD=y

CONFIG_BT_BAS=y
# Enable battery level reporting
CONFIG_ZMK_BATTERY_REPORTING=y
CONFIG_ZMK_SPLIT_BLE_CENTRAL_PERIPHERALS=2
# The central side relays the peripheral's battery level
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_PROXY=y
# The central side obtains the peripheral's battery level
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_FETCHING=y

# ZMK Enable Studio (real-time setting changes)
CONFIG_ZMK_STUDIO=y
# Disable ZMK Studio locking (settings can always be changed)
CONFIG_ZMK_STUDIO_LOCKING=n

